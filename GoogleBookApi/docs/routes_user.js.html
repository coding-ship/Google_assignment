<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: routes/user.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: routes/user.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>var passport = require("passport");

var express = require("express");
var ctrlUser = require("../controllers/user");
var router = express.Router();

require("../../config/google-auth2");

/**
 * Function for checking whether the user is logged in or not
 * @param {Object} req request object
 * @param {Object} res  response object
 * @param {callback} next callback function 
 */
const isLoggedIn = (req, res, next) => {
  if (req.user) next();
  else res.sendStatus(401);
};

/**
 * Get Method for requesting Home Page
 * @param {String} "/" - url
 * @param {callback} ctrlUser.home - callback to call controller method for home
 */
router.get("/", ctrlUser.home);

// google authenticate route
router.get(
  "/google",
  passport.authenticate("google", { scope: ["profile", "email"] })
);
//google authenticate callback route
router.get(
  "/google/callback",
  passport.authenticate("google", { failureRedirect: "/" }),
  ctrlUser.googleCallBack
);

/**
 * Get Method for requesting Search
 * @param {String} "/search" - url
 * @param {middleware} isLoggedIn - MiddleWare to check if the person is logged in 
 * @param {callback} ctrlUser.search - callback to call controller method for search
 */
router.get("/search", isLoggedIn, ctrlUser.search);

/**
 * Post Method for Searching book using Google Book Api
 * @param {String} "/search" - url
 * @param {middleware} isLoggedIn - MiddleWare to check if the person is logged in 
 * @param {callback} ctrlUser.findBook - callback to call controller method for finding searching book using Google Book Api
*/
router.post("/search", isLoggedIn, ctrlUser.findBook);

/**
 * Post Method for getting book detail using the book id
 * @param {String} "/book/:id" - url
 * @param {middleware} isLoggedIn - MiddleWare to check if the person is logged in 
 * @param {callback} ctrlUser.bookDetail - callback to call controller method for finding book detail using id
*/

router.post("/book/:id",isLoggedIn, ctrlUser.bookDetail);

/**
 * Post Method for getting query history
 * @param {String} "/history" - url
 * @param {middleware} isLoggedIn - MiddleWare to check if the person is logged in 
 * @param {callback} ctrlUser.history - callback to call controller method for getting query history
*/

router.get("/history", isLoggedIn, ctrlUser.history);

// logout route
router.get("/logout", ctrlUser.logout);



module.exports = router;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#bookDetail">bookDetail</a></li><li><a href="global.html#findBook">findBook</a></li><li><a href="global.html#googleCallBack">googleCallBack</a></li><li><a href="global.html#history">history</a></li><li><a href="global.html#home">home</a></li><li><a href="global.html#isLoggedIn">isLoggedIn</a></li><li><a href="global.html#logout">logout</a></li><li><a href="global.html#search">search</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.10</a> on Mon Apr 18 2022 23:18:11 GMT+0530 (India Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
